document.addEventListener("DOMContentLoaded", () => {

    /* ---------------- PROJECT DATA ---------------- */
    const projects = [
        {
            title: "Personal Bio Website",
            desc: "Responsive portfolio website with dark/light mode, animated menu and clean UI.",
            tech: ["HTML", "CSS", "JavaScript"],
            image: "images/project1.jpg",
            demo: "https://imnotansh01.github.io/my-bio-website",
            github: "https://github.com/imnotansh01/my-bio-website"
        }
    ];

    const projectGrid = document.getElementById("projectGrid");
    const projectPanel = document.getElementById("projectPanel");
    const overlay = document.getElementById("overlay");

    const panelImage = document.getElementById("panelImage");
    const panelTitle = document.getElementById("panelTitle");
    const panelDesc = document.getElementById("panelDesc");
    const panelTech = document.getElementById("panelTech");
    const panelDemo = document.getElementById("panelDemo");
    const panelGit = document.getElementById("panelGit");

    /* ---------------- RENDER PROJECTS ---------------- */
    projects.forEach((p, index) => {
        const card = document.createElement("div");
        card.className = "project-card";

        card.innerHTML = `
            <img src="${p.image}" class="project-thumb zoomable">
            <h3>${p.title}</h3>
            <p>${p.desc}</p>
            <button class="project-btn">View Project</button>
        `;

        card.querySelector("button").onclick = () => openProject(p);
        card.querySelector("img").onclick = () => openImage(p.image);

        projectGrid.appendChild(card);
    });

    function openProject(p) {
        panelImage.src = p.image;
        panelTitle.textContent = p.title;
        panelDesc.textContent = p.desc;
        panelTech.innerHTML = "";
        p.tech.forEach(t => panelTech.innerHTML += `<li>${t}</li>`);
        panelDemo.href = p.demo;
        panelGit.href = p.github;

        projectPanel.style.right = "0";
        overlay.style.opacity = "1";
        overlay.style.visibility = "visible";
    }

    /* ---------------- CLOSE ALL ---------------- */
    function closeAll() {
        projectPanel.style.right = "-340px";
        overlay.style.opacity = "0";
        overlay.style.visibility = "hidden";
    }

    document.getElementById("closeProject").onclick = closeAll;
    overlay.onclick = closeAll;

    /* ---------------- IMAGE ZOOM ---------------- */
    const imgPreview = document.getElementById("imgPreview");
    const previewImg = document.getElementById("previewImg");
    document.getElementById("closePreview").onclick = () => imgPreview.style.visibility = "hidden";

    function openImage(src) {
        previewImg.src = src;
        imgPreview.style.visibility = "visible";
        imgPreview.style.opacity = "1";
    }

    imgPreview.onclick = () => imgPreview.style.visibility = "hidden";

});
